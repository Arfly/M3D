webpackJsonp([1],{"/MOv":function(e,t){},D10s:function(e,t){},NHnr:function(e,t,o){"use strict";function n(e){if(console.log("原始数据"),console.log(e),_.dispatch("startParse"),!e)return!1;var t=e.split("\n"),o=0,n=t.length,i=[];for(o=2;o<n;o++){t[o]=t[o].replace(/\s+/g," ");var s=t[o].split(" "),r={x:parseFloat(s[1]),y:parseFloat(s[3]),z:parseFloat(s[2])};t[o]=new E(s[0],r),-1===i.indexOf(t[o].atom)&&i.push(t[o].atom)}var c=i.length;for(o=0;o<c;o++){var l=i[o];i[o]={atom:l,radius:w[l].radius,color:w[l].color}}console.log(i);var d=t.length;for(o=2;o<d;o++)for(var u=2;u<d;u++)if(u!==o&&a(t[o],t[u])){t[o].neighbors.push(t[u]);var p=new b(t[o],t[u]);t[o].bonds.push(p)}console.log("文件数据解析成功",t),_.dispatch("endParse"),_.dispatch("updateMoleculeData",t),_.dispatch("updateElementsData",i)}function i(e,t){var o=(e.x-t.x)*(e.x-t.x),n=(e.y-t.y)*(e.y-t.y),i=(e.z-t.z)*(e.z-t.z);return Math.sqrt(o+n+i)}function s(e,t){return 1.2*(e.radius/100+t.radius/100)}function a(e,t){return i(e.position,t.position)<s(e,t)}function r(e){if(console.log(e),e){var t=new FileReader;t.readAsText(e),_.dispatch("loadingFile"),t.onload=function(){_.dispatch("fileLoaded"),n(this.result)}}}function c(e){o("/MOv")}function l(e){o("cL0H")}function d(e){o("ZZ0z")}function u(e){o("xaDV")}function p(e){o("xtNM")}function h(e){o("D10s")}Object.defineProperty(t,"__esModule",{value:!0});var f=o("3MFX"),m=o("EcfS"),g=o("dbJu"),v=o.n(g),w={H:{radius:31,color:"FFFFFF"},He:{radius:31,color:"D9FFFF"},Li:{radius:31,color:"CC80FF"},Be:{radius:31,color:"C2FF00"},B:{radius:31,color:"FFB5B5"},C:{radius:76,color:"909090"},N:{radius:71,color:"3050F8"},O:{radius:66,color:"FF0D0D"},F:{radius:31,color:"90E050"},Ne:{radius:31,color:"B3E3F5"},Na:{radius:31,color:"AB5CF2"},Mg:{radius:31,color:"8AFF00"},Al:{radius:31,color:"BFA6A6"},Si:{radius:31,color:"F0C8A0"},P:{radius:31,color:"FF8000"},S:{radius:31,color:"FFFF30"},Cl:{radius:102,color:"1FF01F"},Ar:{radius:31,color:"80D1E3"},K:{radius:31,color:"8F40D4"},Ca:{radius:31,color:"3DFF00"},Sc:{radius:31,color:"E6E6E6"},Ti:{radius:31,color:"BFC2C7"},V:{radius:31,color:"A6A6AB"},Cr:{radius:31,color:"8A99C7"},Mn:{radius:31,color:"9C7AC7"},Fe:{radius:31,color:"E06633"},Co:{radius:31,color:"F090A0"},Ni:{radius:31,color:"50D050"},Cu:{radius:31,color:"C88033"},Zn:{radius:31,color:"7D80B0"},Ga:{radius:31,color:"C28F8F"},Ge:{radius:31,color:"668F8F"},As:{radius:31,color:"BD80E3"},Se:{radius:31,color:"FFA100"},Br:{radius:31,color:"A62929"},Kr:{radius:31,color:"5CB8D1"},Rb:{radius:31,color:"702EB0"},Sr:{radius:31,color:"00FF00"},Y:{radius:31,color:"94FFFF"},Zr:{radius:31,color:"94E0E0"},Nb:{radius:31,color:"73C2C9"},Mo:{radius:31,color:"54B5B5"},Tc:{radius:31,color:"3B9E9E"},Ru:{radius:31,color:"248F8F"},Rh:{radius:31,color:"0A7D8C"},Pd:{radius:31,color:"006985"},Ag:{radius:31,color:"C0C0C0"},Cd:{radius:31,color:"FFD98F"},In:{radius:31,color:"A67573"},Sn:{radius:31,color:"668080"},Sb:{radius:31,color:"9E63B5"},Te:{radius:31,color:"D47A00"},I:{radius:31,color:"940094"},Xe:{radius:31,color:"429EB0"},Cs:{radius:31,color:"57178F"},Ba:{radius:31,color:"00C900"},La:{radius:31,color:"70D4FF"},Ce:{radius:31,color:"FFFFC7"},Pr:{radius:31,color:"D9FFC7"},Nd:{radius:31,color:"C7FFC7"},Pm:{radius:31,color:"A3FFC7"},Sm:{radius:31,color:"8FFFC7"},Eu:{radius:31,color:"61FFC7"},Gd:{radius:31,color:"45FFC7"},Tb:{radius:31,color:"30FFC7"},Dy:{radius:31,color:"1FFFC7"},Ho:{radius:31,color:"00FF9C"},Er:{radius:31,color:"00E675"},Tm:{radius:31,color:"00D452"},Yb:{radius:31,color:"00BF38"},Lu:{radius:31,color:"00AB24"},Hf:{radius:31,color:"4DC2FF"},Ta:{radius:31,color:"4DA6FF"},W:{radius:31,color:"2194D6"},Re:{radius:31,color:"267DAB"},Os:{radius:31,color:"266696"},Ir:{radius:31,color:"175487"},Pt:{radius:31,color:"D0D0E0"},Au:{radius:31,color:"FFD123"},Hg:{radius:31,color:"B8B8D0"},Tl:{radius:31,color:"A6544D"},Pb:{radius:31,color:"575961"},Bi:{radius:31,color:"9E4FB5"},Po:{radius:31,color:"AB5C00"},At:{radius:31,color:"754F45"},Rn:{radius:31,color:"428296"},Fr:{radius:31,color:"420066"},Ra:{radius:31,color:"007D00"},Ac:{radius:31,color:"70ABFA"},Th:{radius:31,color:"00BAFF"},Pa:{radius:31,color:"00A1FF"},U:{radius:31,color:"008FFF"},Np:{radius:31,color:"0080FF"},Pu:{radius:31,color:"006BFF"},Am:{radius:31,color:"545CF2"},Cm:{radius:31,color:"785CE3"},Bk:{radius:31,color:"8A4FE3"},Cf:{radius:31,color:"A136D4"},Es:{radius:31,color:"B31FD4"},Fm:{radius:31,color:"B31FBA"},Md:{radius:31,color:"B30DA6"},No:{radius:31,color:"BD0D87"},Lr:{radius:31,color:"C70066"},Rf:{radius:31,color:"CC0059"},Db:{radius:31,color:"D1004F"},Sg:{radius:31,color:"D90045"},Bh:{radius:31,color:"E00038"},Hs:{radius:31,color:"E6002E"},Mt:{radius:31,color:"EB0026"}},E=function e(t,o){v()(this,e),this.atom="",this.position={x:0,y:0,z:0},this.color="FFFFFF",this.radius=0,this.neighbors=[],this.bonds=[],t&&w[t]&&(this.atom=t,this.radius=w[t].radius,this.color=w[t].color),o&&(this.position.x=o.x||0,this.position.y=o.y||0,this.position.z=o.z||0),console.log(this.position,o)},F=o("HFN4"),y=o.n(F),b=function(){function e(t,o){if(v()(this,e),!t||!o)return console.error("缺少原子对象形成共价键"),!1;this.name=t.atom+"-"+o.atom,this.start={x:t.position.x,y:t.position.y,z:t.position.z},this.end=this.getMiddlePoint(t.position,o.position),this.position=this.getMiddlePoint(this.start,this.end),this.belong=t,this.color=t.color,this.length=this.getLength(this.start,this.end),this.direction=this.getDirection()}return y()(e,[{key:"getLength",value:function(e,t){var o=(e.x-t.x)*(e.x-t.x),n=(e.y-t.y)*(e.y-t.y),i=(e.z-t.z)*(e.z-t.z);return Math.sqrt(o+n+i)}},{key:"getMiddlePoint",value:function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2,z:(e.z+t.z)/2}}},{key:"getDirection",value:function(e,t){return{x:this.end.x-this.start.x,y:this.end.y-this.start.y,z:this.end.z-this.start.z}}}]),e}();f.default.use(m.a);var A={file:{content:[]},elements:[],needUpdate:!1,loading:!1,loadingTxt:"",InfoShow:!1,structureShow:!0,modelShow:!1,updateVisibleInfo:!1},S={UPDATE_DATA:function(e,t){console.log("文件数据更新成功",t),e.file.content=t,e.needUpdate=!0},UPDATE_ELEMENTS:function(e,t){console.log("元素数据更新成功",t),e.elements=t,console.log("111111",e.elements)},RESET_UPDATESTATE:function(e){e.needUpdate=!1,console.log("视图数据更新完毕")},LOADED:function(e){e.loading=!1},LOADING:function(e){e.loading=!0},PARSING:function(e){e.loading=!0,e.loadingTxt="数据解析中"},LOADING_FILE:function(e){e.loading=!0,e.loadingTxt="文件读取中"},FILE_LOADED:function(e){e.loadingTxt="文件加载完成"},PARSE_START:function(e){e.loadingTxt="文件加载完成"},PARSING_END:function(e){e.loadingTxt="数据解析完成"},RENDER_START:function(e){e.loading=!0,e.loadingTxt="开始渲染"},SHOW_INFO:function(e){e.InfoShow=!0},HIDE_INFO:function(e){e.InfoShow=!1},SHOW_STRUCTURE:function(e){e.structureShow=!0,e.modelShow=!1,e.updateVisibleInfo=!0},SHOW_MODEL:function(e){e.structureShow=!1,e.modelShow=!0,e.updateVisibleInfo=!0},RESET_VISIBLE_STATE:function(){A.updateVisibleInfo=!1}},D={updateMoleculeData:function(e,t){(0,e.commit)("UPDATE_DATA",t)},resetUpdate:function(e){(0,e.commit)("RESET_UPDATESTATE")},loading:function(e){(0,e.commit)("LOADING_FILE")},loaded:function(e){(0,e.commit)("LOADED")},loadingFile:function(e){(0,e.commit)("LOADING_FILE")},fileLoaded:function(e){(0,e.commit)("FILE_LOADED")},startParse:function(e){(0,e.commit)("PARSING")},endParse:function(e){(0,e.commit)("PARSING_END")},startRender:function(e){(0,e.commit)("RENDER_START")},showInfoDialog:function(e){(0,e.commit)("SHOW_INFO")},hideInfoDialog:function(e){(0,e.commit)("HIDE_INFO")},updateElementsData:function(e,t){(0,e.commit)("UPDATE_ELEMENTS",t)},showStructure:function(e){(0,e.commit)("SHOW_STRUCTURE")},showModel:function(e){(0,e.commit)("SHOW_MODEL")},resetVisibleState:function(e){(0,e.commit)("RESET_VISIBLE_STATE")}},x={file:function(e){return e.file},needUpdate:function(e){return e.needUpdate}},C=new m.a.Store({state:A,actions:D,mutations:S,getters:x}),_=C,T={name:"fileReader",data:function(){return{file:null}},methods:{loadFile:function(){r(this.$refs.file.files[0])},chooseFile:function(){this.$refs.file.click()}}},O=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"file-reader"},[o("div",{attrs:{type:"primary"},on:{click:e.chooseFile}},[e._v("open")]),e._v(" "),o("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.loadFile}})])},R=[],L={render:O,staticRenderFns:R},N=L,M=o("XAIM"),I=c,P=M(T,N,!1,I,"data-v-32f7a13a",null),k=P.exports,z=o("y/aM"),B=new z.f,H={name:"navbar",components:{fileReader:k},data:function(){return{activeIndex:"1",isCollapse:!0,InfoShow:!1,SettingShow:!1}},methods:{handleSelect:function(e,t){switch(console.log(e,t),e){case"Aspirin":this.$store.dispatch("startParse"),B.load("./static/Aspirin.xyz",function(e){n(e)});break;case"BlindII":this.$store.dispatch("startParse"),B.load("./static/blindII.xyz",function(e){n(e)});break;case"open":this.$store.dispatch("loadingFile"),console.log(this.$refs.openBtn);break;case"info":this.InfoShow=!0;break;case"setting":this.SettingShow=!0;break;default:console.error("组件未知错误")}},handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},showStructure:function(){this.$store.dispatch("showStructure")},showModel:function(){this.$store.dispatch("showModel")}}},j=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"navbar"},[o("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1-4-1","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b",collapse:e.isCollapse},on:{open:e.handleOpen,close:e.handleClose,select:e.handleSelect}},[o("el-submenu",{attrs:{index:"1"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-document"}),e._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("File")])]),e._v(" "),o("el-menu-item-group",[o("span",{attrs:{slot:"title"},slot:"title"},[e._v("File")]),e._v(" "),o("el-menu-item",{attrs:{index:"Aspirin"}},[e._v("Aspirin")]),e._v(" "),o("el-menu-item",{attrs:{index:"BlindII"}},[e._v("BlindII")]),e._v(" "),o("el-menu-item",{ref:"openBtn",attrs:{index:"Open"}},[o("file-reader")],1)],1)],2),e._v(" "),o("el-menu-item",{attrs:{index:"setting"}},[o("i",{staticClass:"el-icon-setting"}),e._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("Setting")])]),e._v(" "),o("el-menu-item",{attrs:{index:"info"}},[o("i",{staticClass:"el-icon-info"}),e._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("Info")])])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"Info",visible:e.InfoShow,width:"30%"},on:{"update:visible":function(t){e.InfoShow=t}}},[o("span",[e._v("Name")]),e._v(" "),o("el-tag",{attrs:{type:"info"}},[e._v(e._s(this.$store.state.file.content[1]))]),e._v(" "),o("span",[e._v("Atoms Num")]),e._v(" "),o("el-tag",{attrs:{type:"info"}},[e._v(e._s(this.$store.state.file.content[0]))]),e._v(" "),e._l(this.$store.state.elements,function(t){return o("el-tag",{key:t.atom,staticStyle:{margin:"4px 4px"},attrs:{color:"#"+t.color}},[e._v(e._s(t.atom))])})],2),e._v(" "),o("el-dialog",{attrs:{title:"Setting",visible:e.SettingShow,width:"30%"},on:{"update:visible":function(t){e.SettingShow=t}}},[o("el-button",{on:{click:e.showStructure}},[e._v("Structure")]),e._v(" "),o("el-button",{on:{click:e.showModel}},[e._v("Model")])],1)],1)},$=[],U={render:j,staticRenderFns:$},X=U,V=o("XAIM"),q=l,Y=V(H,X,!1,q,"data-v-05f0dcd9",null),Z=Y.exports,W={name:"sidebar"},G=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"sidebar"})},Q=[],J={render:G,staticRenderFns:Q},K=J,ee=o("XAIM"),te=d,oe=ee(W,K,!1,te,"data-v-51f9e292",null),ne=oe.exports,ie=o("34v0"),se=o.n(ie),ae=o("j2h9"),re=o.n(ae);z.TrackballControls=function(e,t){function o(e){!1!==p.enabled&&(window.removeEventListener("keydown",o),g=m,m!==h.NONE||(e.keyCode!==p.keys[h.ROTATE]||p.noRotate?e.keyCode!==p.keys[h.ZOOM]||p.noZoom?e.keyCode!==p.keys[h.PAN]||p.noPan||(m=h.PAN):m=h.ZOOM:m=h.ROTATE))}function n(e){!1!==p.enabled&&(m=g,window.addEventListener("keydown",o,!1))}function i(e){!1!==p.enabled&&(e.preventDefault(),e.stopPropagation(),m===h.NONE&&(m=e.button),m!==h.ROTATE||p.noRotate?m!==h.ZOOM||p.noZoom?m!==h.PAN||p.noPan||(x.copy(R(e.pageX,e.pageY)),C.copy(x)):(b.copy(R(e.pageX,e.pageY)),A.copy(b)):(E.copy(L(e.pageX,e.pageY)),w.copy(E)),document.addEventListener("mousemove",s,!1),document.addEventListener("mouseup",a,!1),p.dispatchEvent(T))}function s(e){!1!==p.enabled&&(e.preventDefault(),e.stopPropagation(),m!==h.ROTATE||p.noRotate?m!==h.ZOOM||p.noZoom?m!==h.PAN||p.noPan||C.copy(R(e.pageX,e.pageY)):A.copy(R(e.pageX,e.pageY)):(w.copy(E),E.copy(L(e.pageX,e.pageY))))}function a(e){!1!==p.enabled&&(e.preventDefault(),e.stopPropagation(),m=h.NONE,document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",a),p.dispatchEvent(O))}function r(e){if(!1!==p.enabled){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:b.y-=.025*e.deltaY;break;case 1:b.y-=.01*e.deltaY;break;default:b.y-=25e-5*e.deltaY}p.dispatchEvent(T),p.dispatchEvent(O)}}function c(e){if(!1!==p.enabled){switch(e.touches.length){case 1:m=h.TOUCH_ROTATE,E.copy(L(e.touches[0].pageX,e.touches[0].pageY)),w.copy(E);break;default:m=h.TOUCH_ZOOM_PAN;var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;D=S=Math.sqrt(t*t+o*o);var n=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;x.copy(R(n,i)),C.copy(x)}p.dispatchEvent(T)}}function l(e){if(!1!==p.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:w.copy(E),E.copy(L(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;D=Math.sqrt(t*t+o*o);var n=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;C.copy(R(n,i))}}function d(e){if(!1!==p.enabled){switch(e.touches.length){case 0:m=h.NONE;break;case 1:m=h.TOUCH_ROTATE,E.copy(L(e.touches[0].pageX,e.touches[0].pageY)),w.copy(E)}p.dispatchEvent(O)}}function u(e){!1!==p.enabled&&e.preventDefault()}var p=this,h={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.target=new z.q(0,0,0);var f=new z.q,m=h.NONE,g=h.NONE,v=new z.q,w=new z.p,E=new z.p,F=new z.q,y=0,b=new z.p,A=new z.p,S=0,D=0,x=new z.p,C=new z.p;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone();var _={type:"change"},T={type:"start"},O={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}},this.handleEvent=function(e){"function"==typeof this[e.type]&&this[e.type](e)};var R=function(){var e=new z.p;return function(t,o){return e.set((t-p.screen.left)/p.screen.width,(o-p.screen.top)/p.screen.height),e}}(),L=function(){var e=new z.p;return function(t,o){return e.set((t-.5*p.screen.width-p.screen.left)/(.5*p.screen.width),(p.screen.height+2*(p.screen.top-o))/p.screen.width),e}}();this.rotateCamera=function(){var e,t=new z.q,o=new z.l,n=new z.q,i=new z.q,s=new z.q,a=new z.q;return function(){a.set(E.x-w.x,E.y-w.y,0),e=a.length(),e?(v.copy(p.object.position).sub(p.target),n.copy(v).normalize(),i.copy(p.object.up).normalize(),s.crossVectors(i,n).normalize(),i.setLength(E.y-w.y),s.setLength(E.x-w.x),a.copy(i.add(s)),t.crossVectors(a,v).normalize(),e*=p.rotateSpeed,o.setFromAxisAngle(t,e),v.applyQuaternion(o),p.object.up.applyQuaternion(o),F.copy(t),y=e):!p.staticMoving&&y&&(y*=Math.sqrt(1-p.dynamicDampingFactor),v.copy(p.object.position).sub(p.target),o.setFromAxisAngle(F,y),v.applyQuaternion(o),p.object.up.applyQuaternion(o)),w.copy(E)}}(),this.zoomCamera=function(){var e;m===h.TOUCH_ZOOM_PAN?(e=S/D,S=D,v.multiplyScalar(e)):(e=1+(A.y-b.y)*p.zoomSpeed,1!==e&&e>0&&v.multiplyScalar(e),p.staticMoving?b.copy(A):b.y+=(A.y-b.y)*this.dynamicDampingFactor)},this.panCamera=function(){var e=new z.p,t=new z.q,o=new z.q;return function(){e.copy(C).sub(x),e.lengthSq()&&(e.multiplyScalar(v.length()*p.panSpeed),o.copy(v).cross(p.object.up).setLength(e.x),o.add(t.copy(p.object.up).setLength(e.y)),p.object.position.add(o),p.target.add(o),p.staticMoving?x.copy(C):x.add(e.subVectors(C,x).multiplyScalar(p.dynamicDampingFactor)))}}(),this.checkDistances=function(){p.noZoom&&p.noPan||(v.lengthSq()>p.maxDistance*p.maxDistance&&(p.object.position.addVectors(p.target,v.setLength(p.maxDistance)),b.copy(A)),v.lengthSq()<p.minDistance*p.minDistance&&(p.object.position.addVectors(p.target,v.setLength(p.minDistance)),b.copy(A)))},this.update=function(){v.subVectors(p.object.position,p.target),p.noRotate||p.rotateCamera(),p.noZoom||p.zoomCamera(),p.noPan||p.panCamera(),p.object.position.addVectors(p.target,v),p.checkDistances(),p.object.lookAt(p.target),f.distanceToSquared(p.object.position)>1e-6&&(p.dispatchEvent(_),f.copy(p.object.position))},this.reset=function(){m=h.NONE,g=h.NONE,p.target.copy(p.target0),p.object.position.copy(p.position0),p.object.up.copy(p.up0),v.subVectors(p.object.position,p.target),p.object.lookAt(p.target),p.dispatchEvent(_),f.copy(p.object.position)},this.dispose=function(){this.domElement.removeEventListener("contextmenu",u,!1),this.domElement.removeEventListener("mousedown",i,!1),this.domElement.removeEventListener("wheel",r,!1),this.domElement.removeEventListener("touchstart",c,!1),this.domElement.removeEventListener("touchend",d,!1),this.domElement.removeEventListener("touchmove",l,!1),document.removeEventListener("mousemove",s,!1),document.removeEventListener("mouseup",a,!1),window.removeEventListener("keydown",o,!1),window.removeEventListener("keyup",n,!1)},this.domElement.addEventListener("contextmenu",u,!1),this.domElement.addEventListener("mousedown",i,!1),this.domElement.addEventListener("wheel",r,!1),this.domElement.addEventListener("touchstart",c,!1),this.domElement.addEventListener("touchend",d,!1),this.domElement.addEventListener("touchmove",l,!1),window.addEventListener("keydown",o,!1),window.addEventListener("keyup",n,!1),this.handleResize(),this.update()},z.TrackballControls.prototype=re()(z.e.prototype),z.TrackballControls.prototype.constructor=z.TrackballControls;var ce=function e(){function t(e){return i.appendChild(e.dom),e}function o(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";n=e}var n=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;right:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(e){e.preventDefault(),o(++n%i.children.length)},!1);var s=(performance||Date).now(),a=s,r=0,c=t(new e.Panel("FPS","#0ff","#002")),l=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=t(new e.Panel("MB","#f08","#201"));return o(0),{REVISION:16,dom:i,addPanel:t,showPanel:o,begin:function(){s=(performance||Date).now()},end:function(){r++;var e=(performance||Date).now();if(l.update(e-s,200),e>=a+1e3&&(c.update(1e3*r/(e-a),100),a=e,r=0,d)){var t=performance.memory;d.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){s=this.end()},domElement:i,setMode:o}};ce.Panel=function(e,t,o){var n=1/0,i=0,s=Math.round,a=s(window.devicePixelRatio||1),r=80*a,c=48*a,l=3*a,d=2*a,u=3*a,p=15*a,h=74*a,f=30*a,m=document.createElement("canvas");m.width=r,m.height=c,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*a+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=o,g.fillRect(0,0,r,c),g.fillStyle=t,g.fillText(e,l,d),g.fillRect(u,p,h,f),g.fillStyle=o,g.globalAlpha=.9,g.fillRect(u,p,h,f),{dom:m,update:function(c,v){n=Math.min(n,c),i=Math.max(i,c),g.fillStyle=o,g.globalAlpha=1,g.fillRect(0,0,r,p),g.fillStyle=t,g.fillText(s(c)+" "+e+" ("+s(n)+"-"+s(i)+")",l,d),g.drawImage(m,u+a,p,h-a,f,u,p,h-a,f),g.fillRect(u+h-a,p,a,f),g.fillStyle=o,g.globalAlpha=.9,g.fillRect(u+h-a,p,a,s((1-c/v)*f))}}};var le=new ce,de=void 0,ue=void 0,pe=void 0,he=void 0,fe=void 0,me=new z.a(16777215,.1),ge=new z.d(16777215,1),ve=new z.d(16777215,1),we=void 0,Ee=void 0,Fe={name:"appMain",computed:se()({},Object(m.c)(["needUpdate","file"])),data:function(){return{dialogVisible:!1}},mounted:function(){de=new z.k(60,window.innerWidth/window.innerHeight,1,9999999999),ue=new z.TrackballControls(de),ue.staticMoving=!1,pe=new z.m,he=new z.r({antialias:!1}),fe=document.getElementById("container");var e=new z.g(100,100,8947848,8947848);e.position.set(0,0,0),pe.add(e),this.init(),this.animate()},methods:se()({},m.b.resetUpdate,{init:function(){this.$store.dispatch("loading"),console.log(de);var e=new z.f;e.load("./static/Aspirin.xyz",function(t){console.log(e,t),n(t)}),de.position.set(5,10,0),ue=new z.TrackballControls(de),ue.rotateSpeed=1,ue.zoomSpeed=1.2,ue.panSpeed=.8,ue.noZoom=!1,ue.noPan=!1,ue.dynamicDampingFactor=.3,ue.keys=[65,83,68],ue.addEventListener("change",this.render),pe.background=new z.b(13421772),pe.add(me),ge.position.set(1e4,1e4,1e4),ve.position.set(-1e4,-1e4,-1e4),he.setPixelRatio(window.devicePixelRatio),he.setSize(window.innerWidth,window.innerHeight),console.log(this),fe.appendChild(he.domElement),fe.appendChild(le.dom),window.addEventListener("resize",this.onWindowResize,!1),this.render()},onWindowResize:function(){de.aspect=window.innerWidth/window.innerHeight,de.updateProjectionMatrix(),he.setSize(window.innerWidth,window.innerHeight),ue.handleResize(),this.render()},animate:function(){requestAnimationFrame(this.animate),this.updateData(),ue.update()},render:function(){le.begin(),he.render(pe,de),le.end()},updateData:function(){this.needUpdate&&(console.log("清理场景模型"),pe.children.length=0,this.$store.dispatch("startRender"),console.log("更新场景模型"),this.addNewModel(),this.render(),this.$store.dispatch("resetUpdate"),this.$store.dispatch("loaded")),this.$store.state.updateVisibleInfo&&(we.visible=this.$store.state.structureShow,Ee.visible=this.$store.state.modelShow,this.$store.dispatch("resetVisibleState"),this.render())},addNewModel:function(){var e=0,t=this.file.content,o=t.length;for(console.log(t),we=new z.j,Ee=new z.j,e=2;e<o;e++){var n=new z.n(.32,30,30),i=new z.i({color:"#"+t[e].color}),s=new z.h(n,i);s.position.set(t[e].position.x,t[e].position.y,t[e].position.z),s.name=t[e].atom,console.log(s),n=new z.n(t[e].radius/100,30,30),i=new z.i({color:"#"+t[e].color});var a=new z.h(n,i);a.position.set(t[e].position.x,t[e].position.y,t[e].position.z),a.name=t[e].atom,console.log(s);for(var r=t[e].bonds.length,c=t[e].bonds,l=0;l<r;l++){console.log(c[l]);var d=new z.c(.1,.1,c[l].length,20),u=new z.i({color:"#"+c[l].color}),p=new z.h(d,u),h=new z.q(0,1,0),f=new z.q(c[l].direction.x,c[l].direction.y,c[l].direction.z),m=new z.q;m.crossVectors(h,f).normalize();var g=h.angleTo(f);p.setRotationFromAxisAngle(m,g),console.log(m,g),p.position.set(c[l].position.x,c[l].position.y,c[l].position.z),we.add(p)}we.add(s),Ee.add(a)}we.position.set(0,0,0),we.name=t[1],Ee.position.set(0,0,0),Ee.name=t[1],de.lookAt(we.position),pe.add(we),pe.add(Ee),Ee.visible=this.$store.state.modelShow,we.visible=this.$store.state.structureShow,console.log(we);var v=new z.g(100,100,8947848,8947848);v.position.set(0,0,0),pe.add(v),pe.add(me),pe.add(ge),pe.add(ve)}})},ye=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{directives:[{name:"loading",rawName:"v-loading",value:this.$store.state.loading,expression:"this.$store.state.loading"}],staticClass:"app-main",staticStyle:{"min-height":"100%"},attrs:{"element-loading-text":this.$store.state.loadingTxt,id:"container"}})},be=[],Ae={render:ye,staticRenderFns:be},Se=Ae,De=o("XAIM"),xe=u,Ce=De(Fe,Se,!1,xe,"data-v-c2e3cf10",null),_e=Ce.exports,Te={name:"layout",components:{navbar:Z,sidebar:ne,appMain:_e}},Oe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"layout"},[o("navbar"),e._v(" "),o("sidebar"),e._v(" "),o("app-main")],1)},Re=[],Le={render:Oe,staticRenderFns:Re},Ne=Le,Me=o("XAIM"),Ie=p,Pe=Me(Te,Ne,!1,Ie,"data-v-791b8da3",null),ke=Pe.exports,ze={name:"app",components:{layout:ke}},Be=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("layout")],1)},He=[],je={render:Be,staticRenderFns:He},$e=je,Ue=o("XAIM"),Xe=h,Ve=Ue(ze,$e,!1,Xe,null,null),qe=Ve.exports,Ye=o("bcLl"),Ze=o.n(Ye);o("VhbW");f.default.config.productionTip=!1,f.default.use(Ze.a),f.default.use(m.a),new f.default({el:"#app",store:_,template:"<App/>",components:{App:qe}})},VhbW:function(e,t){},ZZ0z:function(e,t){},cL0H:function(e,t){},xaDV:function(e,t){},xtNM:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.453c2b7163ac8d45e5a5.js.map